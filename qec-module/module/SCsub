Import("env")
Import("env_modules")

env_qec = env_modules.Clone()

thirdparty_obj = []

env_thirdparty = env_qec.Clone()

env_thirdparty.add_source_files(thirdparty_obj, "thirdparty/stim/**/*.cc")
env_thirdparty.Append(CXXFLAGS=["-std=c++20","-fexceptions"])

env.modules_sources += thirdparty_obj

module_obj = []

env_qec.add_source_files(module_obj, "*.cpp")  # Add all cpp files to the build
env.modules_sources += module_obj

env.Depends(module_obj, thirdparty_obj)
